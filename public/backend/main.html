<!DOCTYPE HTML>
<html>
  <head>
    <title>backend documentation</title>
  </head>
  <body>
    <p><h2># Documentation of the Backend part</h2></p>
    <p><h3>> Deliverable D1</h3></p>
    <p><h3>## General group information</h3></p>
    <table>
      <tr>
        <th>Member n.</th>
        <th>Role</th>
        <th>First name</th>
        <th>Last name</th>
        <th>Matricola</th>
        <th>Email address</th>
      </tr>
      <tr>
        <td>----------------</td>
        <td>----------------</td>
        <td>----------------</td>
        <td>----------------</td>
        <td>----------------</td>
        <td>---------------------------------------</td>
      </tr>
      <tr>
        <td>1</td>
        <td>administrator</td>
        <td>leonardo</td>
        <td>panizzo</td>
        <td>850565</td>
        <td>leonardo.panizzo@mail.polimi.it</td>
      </tr>
      <tr>
        <td>2</td>
        <td>member</td>
        <td>nicholas</td>
        <td>magatti</td>
        <td>845579</td>
        <td>nicholas.magatti@mail.polimi.it</td>
      </tr>
    </table>
    <br>
    <div>
      <p><h3>## Links to other deliverables</h3></p>
      <p>- Deliverable D0: the web application is accessible at [<a href="https://hypermdia-magatti-panizzo.herokuapp.com">this address</a>](https://hypermdia-magatti-panizzo.herokuapp.com)</p>
      <p>- Deliverable D2: the YAML or JSON file containing the specification of the app API can be found at [<a href="https://hypermdia-magatti-panizzo.herokuapp.com/backend/spec.yaml">this address</a>](https://hypermdia-magatti-panizzo.herokuapp.com/backend/spec.yaml)</p>
      <p>- Deliverable D3: the SwaggerUI page of the same API is available at [<a href="https://hypermdia-magatti-panizzo.herokuapp.com/backend/swaggerui/">this address</a>](https://hypermdia-magatti-panizzo.herokuapp.com/backend/swaggerui/)</p>
      <p>- Deliverable D4: the source code of D0 is available as a zip file at [<a href="https://hypermedia123456.herokuapp.com/backend/app.zip">this address</a>](https://hypermedia123456.herokuapp.com/backend/app.zip) NON ANCORA FATTO</p>
      <p>- Deliverable D5: the address of the online source control repository is available at [<a href="https://github.com/LeonardoPanizzo/hypermedia2019">this address</a>](https://github.com/LeonardoPanizzo/hypermedia2019). <br>We hereby declare that this is a private repository and, upon request, we will give access to the instructors.</p>
    </div>
    <br>
    <div><p><h3>>## Specification</h3></p>
      <div><p><h3>### Web Architecture</h3></p>
        <img src="./images/components.png">
        <p>To ensure that HTML is not rendered on the server side we built the backend side that can only send data in json format, the data will be rendered and used by the js file in the frontend that made the request.</p>
      </div>
    </div>
    <br>
    <div><p><h3>### API</h3></p>
      <div><p><h3>#### REST compliance</h3></p>
        <p>We used REST to show the information about our website and its resources. With REST we enable the client to interact with those resources, for example is possible to create new resources(i.e. the creation of a new user) or to change existing resources(i.e. add/delete of events).<br>With a maturity level 2 of REST API it's possible to invoke the information using the HTTP verbs, it's possible to obtain the information with GET or edit them with POST or DELETE.</p>
      </div>
      <br>
      <div><p><h3>#### OpenAPI Resource models </h3></p>
        <p>To manage the resources we introduced the follwing model:
          <ul>
            <li>artisticEvent</li>
            <li>performer</li>
            <li>performs</li>
            <li>reservationArtisticEvent</li>
            <li>reservationSeminar</li>
            <li>seminar</li>
            <li>users</li>
          </ul>
        </p>
      </div>
      <br>
      <div><p><h3>### Data model</h3></p>
        <img src="./images/ER-diagram.png">
        <p>The image represents the ER digram used in the data layer of our web application. There is a complete corrispondence between the data model and the API resource.</p>
      </div>
    </div>
    <br>
    <div><p><h3>## Implementation</h3></p>
      <div><p><h3>### Tools used</h3></p>
        <p>For the backend part of the application we worked with nodeJS, so we used javascript as language with its framework Express, we also used many package (as seen in the package.json file) to implement various function (i.e cookie-parser for the passing of the cookie between client and server or knex to manage the query to the database)</p>
      </div>
      <div><p><h3>### Discussion</h3></p>
        <ul>
          <li>How did you make sure your web application adheres to the provided OpenAPI specification? Which method did you use to test all APIs endpoints against the expected response?</li>
          <p>We made sure that our web application respects the OpenAPI specification defing precise endpoints for every possible request using the module Express.</p>
          <li>Why do you think your web application adheres to common practices to partition a REST-based web application (static assets vs. application data)</li>
          <p>We made accessible only resources present in the public folder using the express.static methos, so it respects the common practice of partition of the web application.</p>
          <li>Describe synthetically why and how did you manage session state, what are the state change triggering actions (e.g., POST to login etc..).</li>
          <p>The magament of the session is made with a cookie containing the information about the user that is created in the server when the user with a POST request login in the web application, the cookie is then passed using the module cookie-parser. In the same way the session is closed when a user makes a DELETE request where the cookie is deleted.</p>
          <li>Which technology did you use (relational or a no-SQL database) for managing the data model?</li>
          <p>For the data layer we used a relational database with the support of PostgreSQL, to connect with the database with our project we used KNEX.</p>
        </ul>
      </div>
      <br>
      <p><h3>## Other information</h3></p>
      <div><p><h3>### Task assignment</h3></p>
        <ul>
          <li>Magatti Nicholas worked mainly on the frontend part: on HTML (80%), CSS (100%), PostgreSQL(50%), heroku (50%), frontend part of javascript (80%), backend part of javascript (20%) and documentation (50%)</li>
          <li>Panizzo Leonardo worked mainly on the backend part: on HTML (20%), postgreSQL(50%), OpenAPI(100%), heroku (50%), frontend part of javascript (20%), backend part of javascript (80%) and documentation (50%)</li>
        </ul>
      </div>
      <br>
      <div><p><h3>### Analysis of existing API</h3></p>
        <p>As an example on how to create the model to use we used <a href="https://api.itbook.store/">this API</a> and <a href="https://jsonapi.org/examples/">this API</a>, for the magament of the session and for the managment of the reservation we used <a href="https://petstore.swagger.io/">this API</a></p>
      </div>
      <br>
      <div><p><h3>### Learning outcome What was the most important thing all the members have learned while developing this part of the project, what questions remained unanswered, how you will use what you've learned in your everyday life?</h3></p>
        <ul>
          <li>Magatti Nicholas improved his skills with javascript concerning the frontend part of websites, also learning to write code that, compared to the previous Hypermedia Applications project, is more scalable and maintainable. He also learnt how to properly manage date and time with both SQL and javascript.</li>
          <li>Panizzo Leonardo learned to write SQL query, javascript to interact with the HTML, to interact with the database and with the mana of a session and now has a practical experience in the creation and the management of a database but wanted to know more about caching and the security protocol.</li>
        </ul>
      </div>
    </div>
  </body>
</html>
